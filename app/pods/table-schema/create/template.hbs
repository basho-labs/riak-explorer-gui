{{#if errors}}
  {{#alert-component type="danger" dismissible=false}}
    {{#if (is-array errors)}}
      <h4><span class="label label-danger">Errors</span></h4>
      <ul>
        {{#each errors as |error|}}
          <li>{{{error}}}</li>
        {{/each}}
      </ul>
    {{else}}
      <h4><span class="label label-danger">Error</span></h4>
      <p>{{errors}}</p>
    {{/if}}
  {{/alert-component}}
{{/if}}

{{#if (not fileUploaded)}}
  {{#dashboard-module.container class='medium-width'}}
    {{dashboard-module.header label='Schema Creator'}}
    {{#dashboard-module.body}}
      {{#alert-component type="info"}}
        <p>Schema templates can be generated by uploading a properly formatted protocol buffer file.</p>
      {{/alert-component}}

      {{file-upload url=model.uploadUrl
      validExtensions=validExtensions
      onIncorrectExtension=(route-action "incorrectExtension")
      onUploadFail=(route-action "uploadFail")
      onUploadSuccess=(route-action "uploadSuccess")}}
    {{/dashboard-module.body}}
  {{/dashboard-module.container}}
{{else}}
  {{#alert-component type="success" dismissible=true}}
    <p>Baseline schema templates have been created from the parsed file messages.
      Please fill in the missing primary key values (anything with <code>##</code>).</p>
  {{/alert-component}}

  {{#each messages as |message index|}}
    {{#dashboard-module.container class='medium-width'}}
      {{#dashboard-module.header label='Table Schema'}}
        <div class="module-actions">
          {{#if (not message.showSpinner)}}
              <button type="submit" class="btn btn-danger action-button" {{action 'removeSchema' index}}>
                <span class="ion-close-round" aria-hidden="true"></span>
                Remove Schema
              </button>
          {{/if}}
        </div>
      {{/dashboard-module.header}}
      {{#dashboard-module.body}}
        <div class="ts-table-container">
          {{#if message.showSpinner}}
            {{loading-spinner statusMessage='Attempting to create table...'}}
          {{else}}

            {{#if message.error}}
              {{#alert-component type="danger" dismissible=false}}
                <h4><span class="label label-danger">Error</span></h4>
                <p>{{message.error}}</p>
              {{/alert-component}}
            {{/if}}

            {{#if message.success}}
              {{#alert-component type="success" dismissible=true}}
                <h4><span class="label label-success">Table Created</span></h4>
                <p>The table was created from the schema. you can create another table from this schema if you would like.</p>
              {{/alert-component}}
            {{/if}}

            {{ivy-codemirror
            mode='sql'
            theme='material'
            lineWrapping=true
            value=message.schema}}

            <div class="submit-button-container">
              <button type="submit" class="btn btn-primary" {{action 'createTable' model message index}}>
                Create Table
              </button>
            </div>
          {{/if}}
        </div>
      {{/dashboard-module.body}}
    {{/dashboard-module.container}}
  {{/each}}
{{/if}}